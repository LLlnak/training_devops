Vagrant.configure(2) do |config|
	config.vm.box = "cdaf/CentOSLVM"
	config.vm.synced_folder ".", "/vagrant", disabled: true
	config.vm.provider "hyperv" do |hv|
		hv.ip_address_timeout = 300
	end
	config.vm.provision "yum", type: "shell",
		inline: "yum install mc -y"

$git = <<SCRIPT
yum install git -y
git config --global user.name "One Cent"
git config --global user.email "One.Cent@test.com"
git init
git clone https://github.com/LLlnak/training_devops
cd training_devops
git checkout task1
SCRIPT

	config.vm.define "s1" do |s1|
		s1.vm.hostname = "OneCent"
		s1.vm.network "private_network", ip: "172.16.1.2"
		s1.vm.network "forwarded_port", guest: 22, host: 2221
		config.vm.provision "shell", inline: $git
	end

	config.vm.define "s2" do |s2|
		s2.vm.hostname = "TwoCents"
		s2.vm.network "private_network", ip: "172.16.1.3"
		s2.vm.network "forwarded_port", guest: 22, host: 2222
	end

end
